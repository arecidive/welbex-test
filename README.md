### Техническое описание сервиса поиска ближайших машин для перевозки грузов.

#### Обзор проекта

Необходимо разработать REST API сервиc для поиска ближайших машин к грузам.

1. Груз обязательно должен содержать следующие характеристики:
    - локация pick-up;
    - локация delivery;
    - вес (1-1000);
    - описание.

2. Машина обязательно должна в себя включать следующие характеристики:
    - уникальный номер (цифра от 1000 до 9999 + случайная заглавная буква английского алфавита в конце, пример:
      "1234A", "2534B", "9999Z");
    - текущая локация;
    - грузоподъемность (1-1000).

3. Локация должна содержать в себе следующие характеристики:
    - город;
    - штат;
    - почтовый индекс (zip);
    - широта;
    - долгота.

При создании машин по умолчанию локация каждой машины заполняется случайным образом. Расчет и отображение
расстояния осуществляется в милях. Расчет расстояния должен осуществляться с помощью библиотеки 'geopy'. Маршруты
не учитывать, использовать расстояние от точки до точки.

Сервис должен поддерживать следующие базовые функции:

1. Создание нового груза (характеристики локаций pick-up, delivery определяются по введенному zip-коду);
2. Получение списка грузов (локации pick-up, delivery, количество ближайших машин до груза (=< 450 миль));
3. Получение информации о конкретном грузе по ID (локации pick-up, delivery, вес, описание, список номеров всех машин с
   расстоянием до выбранного груза);
4. Редактирование груза по ID (вес, описание);
5. Удаление груза по ID;
6. Фильтр списка грузов (вес, мили ближайших машин до грузов);
7. Редактирование машины по ID (локация определяется по введенному zip-коду);
8. Автоматическое обновление локаций всех машин раз в 3 минуты (локация меняется на другую случайную).

### Основные эндпоинты API

1. **Управление грузами: api/v1/cargos/**

   Позволяет выполнять операции CRUD (создание, чтение, обновление, удаление) с грузами
   (выполнены пункты 1, 2, 3, 4, 5, 6);


2. **Обновление машин: api/v1/trucks/<id>**

   Позволяет выполнять обновление локации машины;


3. **Доступ к админ-панели: admin/**

   Доступ к админ-панели.

## Стек технологий

- Python;
- Django (Django Rest Framework);
- PostgreSQL;
- Celery;
- Redis;
- Docker (docker-compose).

### Установка и запуск

1. Cклонируйте или скачайте репозиторий.

```
git clone git@github.com:arecidive/welbex-test.git
```

2. Далее в папке приложения выполнить следующую команду, после чего заполнить файл `.env`:

```
cp .example-env .env
```

3. Для запуска приложения необходимо наличие `Docker` и `Make`.
    - Для первоначального запуска API выполните следующую команду:
       ```
       make setup-web-app
       ```
    
    - Для повторного запуска API выполните следующую команду:
       ```
       make run-web-app
       ```
      
    - Для запуска тестов выполните следующую команду:
       ```
       make tests
       ```